---
title: js怎么执行的
---
## js怎么执行的
 - 现行执行：一次只做一件事情，一件一件排队完成
 - 函数调用栈
    - 实际上在js的执行中，将全局的代码结构可以看成一个大的函数
    - 每次执行函数，就相当于调用一个函数，会创建一个该函数独有的作用空间
    - 函数还可以继续调用函数，这个函数独有的存储空间就会不断的被创建
    - 函数执行结束这个独有的内存结构就会被释放
 - 事件队列
    - 事件机制与异步延时机制的本质

## JS的执行步骤
- 读取所有的js代码文件（文本文件）
- 会对该文件进行"编译"(将其理解为源代码 —— 抽象语法树 -- 字节码(伪汇编))
- 运行时将其转换为机器码(不同平台 得到 机器码就不一样)
- 运行

传统的编译型编程语言(简化)：
文本文件 -- 抽象语法树 -- 借助于优化器 得到中间代码 -- 借助编译器成二进制代码 -- 借助连接器转换成二进制可执行文件

- js的运行时有一个过程的 简单地可以将其分为
   - 预编译过程
      - 在准备执行之前缓存中、编译器运行时需要的东西
      - js引擎会读取每一个js代码,并将其记录在内部的缓存中
      - 这里我们重点考虑声明（变量与函数的声明）
      - 处理步骤
         - 从上往下"阅读"代码
         - 看到var变量的声明 或者let变量的声明 或function函数声明 则将其记录下
            - var
               - var变量的声明会在缓存中记录变量的名字 其值为未初始 undefined
               - 如果看到var的变量名 与 已经记录的名字重名 则覆盖
            - let 
               - let 变量的声明也会在缓存中记录变量的名字 js引擎会在记录该名字后 创造一个暂时性假死的区域（这个名字是不能用）
               - 如果在let之前有过同名的名字被记录，或其后var声明同样的名字是不被允许的
            - function
               - 如果看到的是函数的声明 分为两个步骤
                  - 会将函数的名字作为名字记录到缓存中
                  - 会将这个名字与函数体进行关联
   - 执行过程
      - 解释执行 解释一句 执行一句



- 函数的声明
```js
   //前面不允许有其他的打码与函数的代码结合  !function xx(){} 取反   var f= function(){}  函数表达式
   function 函数名 (...){
      ...
   }
   //前面不允许有其他的打码与函数的代码结合

```


- 常见的面试题
```js
if( "a" in window){
   var a =123
}

console.log(a)

// 结果 123  变量提
//window.a=undefined   "a" in window 为 true 


var num =123   // 如果这个用的是let  则报错   用try catch捕获不了  因为是在预解析阶段（在预解析报错）
function num () {
   console.log('hello js')
}
console.log(num)
// pre阶段
//   读取代码
//      第一行var mun=123 将num这个名字记录在js引擎缓存中
//      第三行至五行读取函数的声明
//         将名字记录缓存中  缓存已有该名字 覆盖
//         将名字与函数体关联
// run 阶段
//   执行赋值 将123赋值给num 注意此时函数体没了
//   执行输出num的值123
```


   